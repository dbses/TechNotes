# 开篇词 | 从今天起，重新理解前端

在这个专栏里，我将知识分成了四个模块来讲解：

- JavaScript

  我主要会从文法和运行时的角度去讨论JavaScript语言。它们是互相关联的，而语义就是文法到运行时之间的桥梁；它们分别又是完备的，任何语言特性都离不开两者，所以从语法和运行时的角度，我们都可以了解完整的JavaScript。

- CSS和HTML

  会侧重从语言和设计思想的角度来讲解，我们同样可以对两者的全貌建立一些认知。

- 浏览器实践

  包含了浏览器工作的原理和一些重要的API，包括BOM、DOM、CSSOM和其他一些内容。了解了这些知识，你才能把JavaScript和HTML、CSS连接起来，用JavaScript来实现功能。

- 前端综合应用

  主要是我的一些工作经验，我会选择我在手淘和淘宝工作中的一些案例来辅助讲解。

前三个模块是前端的基础知识，是个人的前端能力提升，而模块四则是前端团队发展相关的内容，有助于你和团队的整体提高。

# 01-明确你的前端学习路线与方法

**学习路径与学习方法**

第一个方法：建立知识架构；

我们来思考一个问题，如果我们要给JavaScript知识做一个顶层目录，该怎么做呢？如果让我来做，我会这样划分：

- 文法
  - 词法
  - 语法
- 语义
- 运行时
  - 类型
  - 执行过程

文法可以分成词法和语法，这来自编译原理的划分，同样是完备的。语义则跟语法具有一一对应关系，这里暂时不区分。

对于运行时部分，这个划分保持了完备性，我们都知道：程序 = 算法 + 数据结构，那么，对运行时来说，类型就是数据结构，执行过程就是算法。

当我们再往下细分的时候，就会看到熟悉的概念了，词法中有各种直接量、关键字、运算符，语法和语义则是表达式、语句、函数、对象、模块，类型则包含了对象、数字、字符串等……

第二个方法：追本溯源；

追本溯源，其实就是关注技术提出的背景，关注原始的论文或者文章，关注作者说的话。

操作起来也非常简单：翻翻资料（一般wiki上就有）找找历史上的文章和人物，再顺藤摸瓜翻出来历史资料就可以了，如果翻出来的是历史人物（幸亏互联网的历史不算悠久），你也可以试着发封邮件问问。

# 02-列一份前端知识架构图

前端的知识在总体上分成基础部分和实践部分，基础部分包含了JavaScript语言（模块一）、CSS和HTML（模块二）以及浏览器的实现原理和API（模块三），这三个模块涵盖了一个前端工程师所需要掌握的全部知识。

实践部分（模块四）重点会介绍我在工作过程中遇到的问题和解决方案。

**JavaScript**

![image-20201225233927293](https://gitee.com/yanglu_u/ImgRepository/raw/master/images/20201225233927.png)

**HTML 和 CSS**

![image-20201225232835637](https://gitee.com/yanglu_u/ImgRepository/raw/master/images/20201225232841.png)

**浏览器的实现原理和API**

![image-20201225233227440](https://gitee.com/yanglu_u/ImgRepository/raw/master/images/20201225233227.png)

**前端工程实践**

<img src="https://gitee.com/yanglu_u/ImgRepository/raw/master/images/20201225233330.png" alt="image-20201225233330225" style="zoom: 33%;" />

# 03-HTML语义：div和span不是够用了吗？

HTML的标签可以分为很多种，比如head里面的元信息类标签，又比如img、video、audio之类的替换型媒体标签。我今天要讲的标签是：语义类标签。

**语义类标签是什么，使用它有什么好处？**

语义类标签的特点是视觉表现上互相都差不多，主要的区别在于它们表示了不同的语义，比如大家会经常见到的section、nav、p，这些都是语义类的标签。

在讲语义之前，我们来说说为什么要用语义。

- 语义类标签对开发者更为友好，使用语义类标签增强了可读性，即便是在没有CSS的时候，开发者也能够清晰地看出网页的结构，也更为便于团队的开发和维护。
- 除了对人类友好之外，语义类标签也十分适宜机器阅读。它的文字表现力丰富，更适合搜索引擎检索（SEO），也可以让搜索引擎爬虫更好地获取到更多有效信息，有效提升网页的搜索量，并且语义类还可以支持读屏软件，根据文章可以自动生成目录等等。

与JavaScript这样严格的编程语言相比，HTML中语义标签的使用更接近我们平常说话用的自然语言。我们说话并没有唯一的标准措辞，语义标签的使用也是一样。下面，我挑选了几种（我认为）比较重要的语义标签使用场景，来为你介绍一下。

**作为自然语言延伸的语义类标签**

语义标签的使用的第一个场景，就是：作为自然语言和纯文本的补充，用来表达一定的结构或者消除歧义。

在日语中，有一个语法现象叫做：ルビ，它的读音是ruby（著名的ruby语言就是据此命名的），它中文的意思大约类似于注音或者意思的注解。

<img src="https://gitee.com/yanglu_u/ImgRepository/raw/master/images/20201226000855.png" alt="image-20201226000854972" style="zoom: 33%;" />

在HTML5中，引入了这个表示ruby的标签，它由ruby、rt、rp三个标签来实现。

还有一种情况是，HTML的有些标签实际上就是必要的，甚至必要的程度可以达到：如果没有这个标签，文字会产生歧义的程度。

比如em标签，em表示重音。

```html
今天我吃了一个<em>苹果</em>。
今天我吃了<em>一个</em>苹果。
```

**作为标题摘要的语义类标签**

另一个语义重要使用场景，就是文章的结构。中国古代小说就形成了“章-回”的概念，西方的戏剧也有幕的区分，所以人类的自然语言作品也是如出一辙。

h1-h6是最基本的标题，它们表示了文章中不同层级的标题。有些时候，我们会有副标题，为了避免副标题产生额外的一个层级，我们使用hgroup标签。

我们来看下有/无hgroup的对比：

```html
<h1>JavaScript对象</h1>
<h2>我们需要模拟类吗？</h2>
<p>balah balah</p>
......
```

此段生成以下标题结构：

- JavaScript对象
  - 我们需要模拟类吗？
  - …

```html
<hgroup>
<h1>JavaScript对象</h1>
<h2>我们需要模拟类吗？</h2>
</hgroup>
<p>balah balah</p>
......
```

这一段生成以下标题结构：

- JavaScript对象——我们需要模拟类吗？
  - …

在hgroup中的h1-h6被视为同一标题的不同组成部分。

HTML 5开始，有了section标签，这个标签可不仅仅是一个“有语义的div”，它会改变h1-h6的语义。section的嵌套会使得其中的h1-h6下降一级，因此，在HTML5以后，我们只需要section和h1就足以形成文档的树形结构：

```html
<section>
    <h1>HTML语义</h1>
    <p>balah balah balah balah</p>
    <section>
        <h1>弱语义</h1>
        <p>balah balah</p>
    </section>
    <section>
        <h1>结构性元素</h1>
        <p>balah balah</p> 
    </section>
......
</section>
```

这段代码同样会形成前面例子的标题结构：

- HTML语义
  - 弱语义
  - 结构性元素
  - ……

**作为整体结构的语义类标签**

最后一个场景是，随着越来越多的浏览器推出“阅读模式”，以及各种非浏览器终端的出现，语义化的HTML适合机器阅读的特性变得越来越重要。

比如，这里一个典型的body类似这样：

```html
<body>
    <header>
        <nav>
            ……
        </nav>
    </header>
    <aside>
        <nav>
            ……
        </nav>
    </aside>
    <section>……</section>
    <section>……</section>
    <section>……</section>
    <footer>
        <address>……</address>
    </footer>
</body>
```

除此之外，还有article，article是一种特别的结构，它表示具有一定独立性质的文章。所以，article和body具有相似的结构，同时，一个HTML页面中，可能有多个article存在。一个典型的场景是多篇新闻展示在同一个新闻专题页面中，这种类似报纸的多文章结构适合用article来组织。

```html
<body>
    <header>……</header>
    <article>
        <header>……</header>
        <section>……</section>
        <section>……</section>
        <section>……</section>
        <footer>……</footer>
    </article>
    <article>
        ……
    </article>
    <article>
        ……
    </article>
    <footer>
        <address></address>
    </footer>
</body>
```

- header，如其名，通常出现在前部，表示导航或者介绍性的内容。
- footer，通常出现在尾部，包含一些作者信息、相关链接、版权信息等。
- aside表示跟文章主体不那么相关的部分，它可能包含导航、广告等工具性质的内容。

aside很容易被理解为侧边栏，实际上二者是包含关系，侧边栏是aside，aside不一定是侧边栏。

aside和header中都可能出现导航（nav标签），二者的区别是，header中的导航多数是到文章自己的目录，而aside中的导航多数是到关联页面或者是整站地图。

最后footer中包含address，这是个非常容易被误用的标签。address并非像date一样，表示一个给机器阅读的地址，而是表示“文章（作者）的联系方式”，address明确地只关联到article和body。

# 04-HTML语义：如何运用语义类标签来呈现Wiki网页？

http://static001.geekbang.org/static/time/quote/World_Wide_Web-Wikipedia.html

这是一篇我们选择的wiki文章，虽然在原本的wikipedia网站中，也是大量使用了div和span来完成功能。在这里，我们来尝试分析一下，应该如何用语义类标签来呈现这样的一个页面/文章。

**aside**

![image-20201226225650108](https://gitee.com/yanglu_u/ImgRepository/raw/master/images/20201226225650.png)

首先我们来看下，左侧侧边栏，根据上一篇文章中提到的语义定义，这里属于aside内容。是导航性质的工具内容。

**article**

![image-20201226230510700](https://gitee.com/yanglu_u/ImgRepository/raw/master/images/20201226230510.png)

我们来到文章主体部分，因为主体部分具有明确的独立性，所以可以用article来包裹。

**hgroup, h1, h2**

![image-20201226230416473](https://gitee.com/yanglu_u/ImgRepository/raw/master/images/20201226230416.png)

```html
<hgroup>
  <h1>World Wide Web </h1>
  <h2>From Wikipedia, the free encyclopedia</h2>
</hgroup>
```

**abbr**

![image-20201226230350689](https://gitee.com/yanglu_u/ImgRepository/raw/master/images/20201226230350.png)

abbr标签表示缩写。考虑到WWW是World Wide Web的缩写，所以文中所有出现的WWW，都应该使用abbr标签。

```html
<abbr title="World Wide Web">WWW</abbr>.
```

**hr**

![image-20201226230333717](https://gitee.com/yanglu_u/ImgRepository/raw/master/images/20201226230333.png)

在wiki的界面中，出现了一条很长的横线，大家都知道hr标签表示横向分隔线。

**p**

![image-20201226230322791](https://gitee.com/yanglu_u/ImgRepository/raw/master/images/20201226230322.png)

HTML中并没有note相关的语义，所以，我们用普通的p标签，加上`class="note"`来实现。后面的多数自然段都是普通的段落，我们用p标签来实现。

**strong**

![image-20201226230309683](https://gitee.com/yanglu_u/ImgRepository/raw/master/images/20201226230309.png)

注意，这里 “World Wide Web (WWW)” 和 “the Web” 使用了黑体呈现，从上下文来看，这里表示这个词很重要，所以我们使用strong标签。

```html
<p> 
A global map of the web index for countries in 2014
<strong>The World Wide Web (WWW)</strong>, also called <strong>the Web</strong>,
......
```

**blockquote, q, cite**

![image-20201226230254967](https://gitee.com/yanglu_u/ImgRepository/raw/master/images/20201226230255.png)

在HTML中，有三个跟引述相关的标签blockquote表示段落级引述内容，q表示行内的引述内容，cite表示引述的作品名。

这里的作品名称 “What is the difference between the Web and the Internet?”，应当使用cite标签。

```html
<cite>"What is the difference between the Web and the Internet?"</cite>. W3C Help and FAQ. W3C. 2009. Archived from the original on 9 July 2015. Retrieved 16 July 2015.
```

**time**

![image-20201226230921338](https://gitee.com/yanglu_u/ImgRepository/raw/master/images/20201226230921.png)

这里除了引用的文章外，还出现了日期，为了让机器阅读更加方便，可以加上time标签：

```html
<cite>"What is the difference between the Web and the Internet?"</cite>. W3C Help and FAQ. W3C. 2009. Archived from the original on <time datetime="2015-07-09">9 July 2015</time>. Retrieved <time datetime="2015-07-16">16 July 2015</time>.
```

**figure, figcaption**

![image-20201226231044902](https://gitee.com/yanglu_u/ImgRepository/raw/master/images/20201226231044.png)

文章的右侧，出现了几张图片，这种出现在文中的图片，不仅仅是一个img标签，它和下面的文字组成了一个figure的语法现象，figure也是我们的一种标签（用于表示与主文章相关的图像、照片等流内容）。

```html
<figure>
 <img src="https://.....440px-NeXTcube_first_webserver.JPG"/>
 <figcaption>The NeXT Computer used by Tim Berners-Lee at CERN.</figcaption>
</figure>
```

这种插入文章中的内容，不仅限图片，代码、表格等，只要是具有一定自包含性（类似独立句子）的内容，都可以用figure。这里面，我们用figcaption表示内容的标题，当然，也可以没有标题。

**dfn**

![image-20201226231733121](https://gitee.com/yanglu_u/ImgRepository/raw/master/images/20201226231733.png)

这里分别定义了Internet和World Wide Web，我们应该使用dfn标签。

```html
The terms Internet and World Wide Web are often used without much distinction. However, the two are not the same. 
The <dfn>Internet</dfn> is a global system of interconnected computer networks.
In contrast, the <dfn>World Wide Web</dfn> is a global collection of documents and other resources, linked by hyperlinks and URIs. 
```

dfn标签是用来包裹被定义的名词。

**nav, ol, ul**

![image-20201226231955174](https://gitee.com/yanglu_u/ImgRepository/raw/master/images/20201226231955.png)

接下来，几个普通的段落之后，我们看到了文章的目录。这里的目录链接到文章的各个章节，我们可以使用nav标签。因为这里的目录顺序不可随意变化，所以我们这里使用多级的ol结构。

```html
<nav>
  <h2>Contents</h2>
  <ol>
    <li><a href="...">History</a></li>
    <li><a href="...">Function</a>
      <ol>
        <li><a href="...">Linking</a></li>
        <li><a href="...">Dynamic updates of web pages</a></li>
        ...
      </ol>
    </li>
    ...
  </ol>
</nav>
```

ol和ul的区分是内容是否有顺序关系。

**pre, samp, code**

![image-20201226232221069](https://gitee.com/yanglu_u/ImgRepository/raw/master/images/20201226232221.png)

文章中嵌入了一些代码和一些预先编写好的段落。

这是一段HTTP协议的内容描述，因为这段内容的换行是非常严格的，所以我们不需要浏览器帮我们做自动换行，因此我们使用了pre标签，表示这部分内容是预先排版过的，不需要浏览器进行排版。

又因为这是一段计算机程序的示例输出，所以我们可以使用samp标签：

```html
<pre><samp>
GET /home.html HTTP/1.1
Host: www.example.org
</samp></pre>
```

# 05-JavaScript类型：关于类型，有哪些你不知道的细节？







